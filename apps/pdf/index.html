<script src="http://fb.me/react-0.13.1.js"></script>
<script src="http://fb.me/JSXTransformer-0.13.1.js"></script>

<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="http://mozilla.github.io/pdf.js/build/pdf.js" type="text/javascript"></script>

<script type="text/jsx">

  /** @jsx React.DOM */
  'use strict';

  // PDF Viewer
  var Viewer = React.createClass({

    /**
    * When component mounted, bind application state interefece events
    */
    componentDidMount: function() {

      var url = 'http://cdn.mozilla.net/pdfjs/helloworld.pdf';
      var canvas = this.refs.canvas.getDOMNode();

      PDFJS.disableWorker = true;
      PDFJS.getDocument(url).then(function getPdfHelloWorld(pdf) {

        //
        // Fetch the first page
        //
        pdf.getPage(1).then(function getPageHelloWorld(page) {
          var scale = 1.5;
          var viewport = page.getViewport(scale);

          var canvas = document.getElementById('the-canvas');
          var context = canvas.getContext('2d');
          canvas.height = viewport.height;
          canvas.width = viewport.width;

          page.render({canvasContext: context, viewport: viewport});
        });
      });

    },

    componentWillUnmount: function() {
    },

    /**
    * Render the editor
    */
    render: function() {
      var style = {
        border: '1px solid black'
      };

      return (
        <div className="main">
          <canvas ref="canvas" style={style}></canvas>
        </div>
      );
    }
  });

  // Renender the editor
  React.render(<Viewer />, document.body);

</script>
